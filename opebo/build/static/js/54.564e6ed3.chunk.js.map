{"version":3,"sources":["user/optPage.js"],"names":["logo","require","OtpPhone","useState","otp","error","loading","redirectToReferrer","values","setValues","user","isAuthenticated","clickSubmit","event","preventDefault","otpVerify","then","data","authenticate","className","style","display","src","alt","action","method","type","name","value","aria-label","required","onChange","target","placeholder","onClick","fill","viewBox","fillRule","d","clipRule","to","OtpForm","_id"],"mappings":"yKAIMA,EAAOC,EAAQ,IA+HNC,UA7HE,WAAO,IAAD,EACOC,mBAAS,CACnCC,IAAK,GACLC,MAAO,GACPC,SAAS,EACTC,oBAAoB,IALD,mBACdC,EADc,KACNC,EADM,KAQbL,EAA4CI,EAA5CJ,IAAKE,EAAuCE,EAAvCF,QAASD,EAA8BG,EAA9BH,MAAOE,EAAuBC,EAAvBD,mBAErBG,EAASC,cAATD,KAMFE,EAAc,SAACC,GACnBA,EAAMC,iBACNL,EAAU,eAAKD,EAAN,CAAcH,OAAO,EAAOC,SAAS,KAC9CS,YAAU,CAAEX,QAAOY,MAAK,SAACC,GACnBA,EAAKZ,MACPI,EAAU,eAAKD,EAAN,CAAcH,MAAOY,EAAKZ,MAAOC,SAAS,KAEnDY,YAAaD,GAAM,WACjBR,EAAU,eACLD,EADI,CAEPD,oBAAoB,YAyF9B,OACE,6BAfAD,GACE,yBAAKa,UAAU,mFACb,wBAAIA,UAAU,cAAd,eAXJ,yBACEA,UAAU,iFACVC,MAAO,CAAEC,QAAShB,EAAQ,GAAK,SAE9BA,GAhEW,kBACd,yBAAKc,UAAU,gGACb,yBAAKA,UAAU,mBACb,6BACE,yBAAKA,UAAU,4BAA4BG,IAAKtB,EAAMuB,IAAI,UAC1D,wBAAIJ,UAAU,uEAAd,sBAIF,0BAAMA,UAAU,OAAOK,OAAO,IAAIC,OAAO,QACvC,2BAAOC,KAAK,SAASC,KAAK,WAAWC,MAAM,SAC3C,yBAAKT,UAAU,wBACb,6BACE,2BACEU,aAAW,MACXF,KAAK,MACLD,KAAK,MACLI,UAAQ,EACRC,UAtCQJ,EAsCe,MAtCN,SAACd,GAC9BJ,EAAU,eAAKD,EAAN,aAAcH,OAAO,GAAQsB,EAAOd,EAAMmB,OAAOJ,WAsC9CT,UAAU,sPACVc,YAAY,YACZL,MAAOxB,MAIb,yBAAKe,UAAU,QACb,4BACEe,QAAStB,EACTc,KAAK,SACLP,UAAU,sRAEV,0BAAMA,UAAU,gCACd,yBACEA,UAAU,qFACVgB,KAAK,eACLC,QAAQ,aAER,0BACEC,SAAS,UACTC,EAAE,yGACFC,SAAS,cAdjB,WAoBA,yBAAKpB,UAAU,sCACb,kBAAC,IAAD,CACEqB,GAAG,IACHrB,UAAU,0HAFZ,gBAnES,IAACQ,EA2GjBc,GAXClC,EACK,kBAAC,IAAD,CAAUiC,GAAE,0BAAqB9B,EAAKgC,OAE3C/B,cACK,kBAAC,IAAD,CAAU6B,GAAG,WADtB","file":"static/js/54.564e6ed3.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { otpVerify, authenticate, isAuthenticated } from \"../auth\";\r\n\r\nconst logo = require(\"../assets/images/logo.png\");\r\n\r\nconst OtpPhone = () => {\r\n  const [values, setValues] = useState({\r\n    otp: \"\",\r\n    error: \"\",\r\n    loading: false,\r\n    redirectToReferrer: false,\r\n  });\r\n\r\n  const { otp, loading, error, redirectToReferrer } = values;\r\n\r\n  const { user } = isAuthenticated();\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n    otpVerify({ otp }).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error, loading: false });\r\n      } else {\r\n        authenticate(data, () => {\r\n          setValues({\r\n            ...values,\r\n            redirectToReferrer: true,\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n  const OtpForm = () => (\r\n    <div className='min-h-screen flex items-start justify-center font-sans bg-gray-100 py-2 px-4 sm:px-6 lg:px-8'>\r\n      <div className='max-w-md w-full'>\r\n        <div>\r\n          <img className='mx-auto h-24 mt-10 w-auto' src={logo} alt='OpeBo' />\r\n          <h2 className='mt-10 text-center text-3xl leading-9 font-sans font-bold text-black'>\r\n            Hi, Welcome back!\r\n          </h2>\r\n        </div>\r\n        <form className='mt-8' action='#' method='POST'>\r\n          <input type='hidden' name='remember' value='true' />\r\n          <div className='rounded-md shadow-sm'>\r\n            <div>\r\n              <input\r\n                aria-label='OTP'\r\n                name='otp'\r\n                type='tel'\r\n                required\r\n                onChange={handleChange(\"otp\")}\r\n                className='appearance-none rounded-none relative bg-gray-300 block w-full px-3 py-2 border border-gray-100 placeholder-gray-900 text-gray-900 rounded-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5'\r\n                placeholder='Enter OTP'\r\n                value={otp}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='mt-6'>\r\n            <button\r\n              onClick={clickSubmit}\r\n              type='submit'\r\n              className='group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-black hover:bg-gray-800 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out'\r\n            >\r\n              <span className='absolute left-0 inset-y pl-3'>\r\n                <svg\r\n                  className='h-5 w-5 text-white group-hover:text-indigo-400 transition ease-in-out duration-150'\r\n                  fill='currentColor'\r\n                  viewBox='0 0 20 20'\r\n                >\r\n                  <path\r\n                    fillRule='evenodd'\r\n                    d='M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z'\r\n                    clipRule='evenodd'\r\n                  />\r\n                </svg>\r\n              </span>\r\n              Sign In\r\n            </button>\r\n            <div className='text-sm leading-5 mt-4 text-center'>\r\n              <Link\r\n                to='/'\r\n                className='font-medium text-orange-500 hover:text-gray-900 focus:outline-none focus:underline transition ease-in-out duration-150'\r\n              >\r\n                Go Back\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n  const showError = () => (\r\n    <div\r\n      className='flex alert alert-danger justify-center items-center bg-red-500 text-white py-1'\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className='flex alert alert-info justify-center items-center bg-orange-500 text-white py-4'>\r\n        <h2 className='text-white'>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToReferrer) {\r\n      return <Redirect to={`/user/dashboard/${user._id}`} />;\r\n    }\r\n    if (isAuthenticated()) {\r\n      return <Redirect to='/' />;\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      {showLoading()}\r\n      {showError()}\r\n      {OtpForm()}\r\n      {redirectUser()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OtpPhone;\r\n"],"sourceRoot":""}